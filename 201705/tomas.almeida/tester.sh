#!/usr/bin/env bash

SOLUTION_FOUND=0
SOLUTION_NOTFOUND=1

declare TEST_SOLUTION
declare TEST_ELEMENTS
TEST_SOLUTION[0]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[0]=""
TEST_SOLUTION[1]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[1]="1 2 3"
TEST_SOLUTION[2]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[2]="-5 -3 2 4 7"
TEST_SOLUTION[3]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[3]="-83314 -82838 -80120 -63468 -62478 -59378 -56958 -50061 -34791 -32264 -21928 -14988 23767 24417 26403 26511 36399 78055"
TEST_SOLUTION[4]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[4]="-92953 -91613 -89733 -50673 -16067 -9172 8852 30883 46690 46968 56772 58703 59150 78476 84413 90106 94777 95148"
TEST_SOLUTION[5]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[5]="-94624 -86776 -85833 -80822 -71902 -54562 -38638 -26483 -20207 -1290 12414 12627 19509 30894 32505 46825 50321 69294"
TEST_SOLUTION[6]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[6]="-83964 -81834 -78386 -70497 -69357 -61867 -49127 -47916 -38361 -35772 -29803 -15343 6918 19662 44614 66049 93789 95405"
TEST_SOLUTION[7]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[7]="-68808 -58968 -45958 -36013 -32810 -28726 -13488 3986 26342 29245 30686 47966 58352 68610 74533 77939 80520 87195"
TEST_SOLUTION[8]=$SOLUTION_NOTFOUND
TEST_ELEMENTS[8]="1 2 3 4 5 6 7 8 9 10"

TEST_SOLUTION[9]=$SOLUTION_FOUND
TEST_ELEMENTS[9]="-1 1"
TEST_SOLUTION[10]=$SOLUTION_FOUND
TEST_ELEMENTS[10]="-97364 -71561 -69336 19675 71561 97863"
TEST_SOLUTION[11]=$SOLUTION_FOUND
TEST_ELEMENTS[11]="-53974 -39140 -36561 -23935 -15680 0"
TEST_SOLUTION[12]=$SOLUTION_FOUND
TEST_ELEMENTS[12]="-2 2 3"
TEST_SOLUTION[13]=$SOLUTION_FOUND
TEST_ELEMENTS[13]="0"
TEST_SOLUTION[14]=$SOLUTION_FOUND
TEST_ELEMENTS[14]="-3 1 2"
TEST_SOLUTION[15]=$SOLUTION_FOUND
TEST_ELEMENTS[15]="-9 -8 -7 -6 -5 -4 -3 -2 -1 45"
TEST_SOLUTION[16]=$SOLUTION_FOUND
TEST_ELEMENTS[16]="-45 1 2 3 4 5 6 7 8 9"
TEST_SOLUTION[17]=$SOLUTION_FOUND
TEST_ELEMENTS[17]="-98634 -86888 -48841 -40483 2612 9225 17848 71967 84319 88875"
TEST_SOLUTION[18]=$SOLUTION_FOUND
TEST_ELEMENTS[18]="-97162 -95761 -94672 -87254 -57207 -22163 -20207 -1753 11646 13652 14572 30580 52502 64282 74896 83730 89889 92200"
TEST_SOLUTION[19]=$SOLUTION_FOUND
TEST_ELEMENTS[19]="-93976 -93807 -64604 -59939 -44394 -36454 -34635 -16483 267 3245 8031 10622 44815 46829 61689 65756 69220 70121"
TEST_SOLUTION[20]=$SOLUTION_FOUND
TEST_ELEMENTS[20]="-92474 -61685 -55348 -42019 -35902 -7815 -5579 4490 14778 19399 34202 46624 55800 57719 60260 71511 75665 82754"
TEST_SOLUTION[21]=$SOLUTION_FOUND
TEST_ELEMENTS[21]="-85029 -84549 -82646 -80493 -73373 -57478 -56711 -42456 -38923 -29277 -3685 -3164 26863 29890 37187 46607 69300 84808"
TEST_SOLUTION[22]=$SOLUTION_FOUND
TEST_ELEMENTS[22]="-87565 -71009 -49312 -47554 -27197 905 2839 8657 14622 32217 35567 38470 46885 59236 64704 82944 86902 90487"
TEST_SOLUTION[23]=$SOLUTION_FOUND
TEST_ELEMENTS[23]="-1 -1 -1 -1 -1 -1 -1 -1 -1 9"
TEST_SOLUTION[24]=$SOLUTION_FOUND
TEST_ELEMENTS[24]="-7 -8 -3 -1 -2 1 4 8 7 7"
TEST_SOLUTION[25]=$SOLUTION_FOUND
TEST_ELEMENTS[25]="47105 -822 -36592 77889 81401 77551 -52473 11143 40079 -50108 34102 -67718 63163 -35455 80092 87618 -37596 -64651 68219 -66149 -50056 12143 -9671 18759 71578 -77866 -68393 78846 -17217 -16755 18586 -32752 21386 76399 -70389 61049 -87621 69590 -60149 13841 -74934 78922 61019 43715 -20934 79596 -91431 -8385 -47466 27563 -77419 71004 -64866 -13159 33800 43865 87675 95704 -89183 495 -3108 -16915 48404 69325 -13872 2806 74922 51107 66469 19866 90865 -74610 30704 60947 -17915 -25707 5080 -48936 37316 -96306 97026 95010 -70810 31134 19776 90563 19885 -28706 97654 45786 -64483 -79392 99482 -86319 -96065 5053 -16479 22421 55635 -610 11558 -75835 68520 -50173 78274 -11969 67685 -33941 9249 64832 -83257 -2848 -43398 -48941 -87356 -76000 -61503 14246 -79616 65430 31947 -6559 94103 4677 23312 6603 43907 79635 25699 85475 -43400 -35904 -76340 -61069 15098 77578 -63090 23368 -43883 39418 81667 -65899 -67309 30987 -8557 58058 74551 44008 51711 92542 -37702 -42320 38626 54813 31472 2014 13421 10200 14776 -93347 -83424 -40878 -59066 97136 10466 20135 -60780 -81407 66457 -80681 -8069 -77994 -78899 7651 69101 -50740 87309 -26361 86359 46042 -83232 44597 -23820 52350 95574 -89716 69356 -52528 -51472 -58863 43173 -53415 -42822 22836 -51040 34667 -29867 -31612 -20679 -14529 -72693 21998 -97556 -16567 17918 532 -27541 -13177 35345 -85549 -2111 -45865 30899 91668 -34486 -33671 -70805 2682 22216 -31976 55453 5974 60564 55703 -75563 31420 45105 -47418 39973 32971 -81781 -35339 -36754 -35108 -94619 43845 -33255 -61848 39859 -67089 -18004 -15876 -5888 -26821 -40115 8673 83586 -56249 98425 -99887 95724 25844 -98027 8039 62287 80349 -4632 -94207 -5414 74675 94083 45898 -37479 -33430 62607 59057 18444 58894 -74006 59383 -8095 -85663 -54163 -63309 66166 27991 66950 11319 -9075 78746 -6129 -16383 -85071 62987 -23352 -33220 32274 35808 74367 -43447 11334 4200 17819 13016 7262 5453 -82815 66759 47982 6761 9506 -64291 -23371 -74140 -45487 -35581 49385 -18605 -40864 63673 74969 -96398 605 49895 -99381 25451 -15246 -52193 -63684 22937 -84844 53108 -77462 69723 -5425 46853 -68795 -70269 73773 12576 -32106 15003 -5057 69170 -86151 83094 -40769 -99990 -78193 54009 45711 17369 96984 -29249 -43228 9898 -3627 1111 -41917 99281 -92072 32412 -59877 -1050 74336 86618 87322 -44421 -9129 21291 -56049 -60804 -38426 -45788 -37179 59852 -4082 36039 -29680 -42738 -22346 8035 -67448 96244 21626 -74514 -43626 65381 -28521 16949 3277 -38380 -72130 -663 62472 51315 84878 30653 80768 -87950 78293 -10124 -54444 -58490 -39909 32131 36818 42557 -22802 -22403 4038 66681 -11463 -428 13850 12924 -60055 -85246 6248 39607 -89258 -84324 11576 -14649 3477 59718 -60011 -83103 -86829 -53132 18955 6096 -55378 39967 -96303 -64175 66147 16317 20061 -21840 934 -89844 42882 32901 55626 -62245 43016 -1120 27695 -93440 80264 -1107 -47913 10365 41584 65739 73365 -41087 -31009 -23708 -36643 -6075 81674 -27173 20757 -11487 55295 95674 -24312 -99059 -96950 87376 37053 -53694 35515 -69577 79992 76163 -84003 40585 87005 -82859 10802 -72932 97555 96053 -27978 56120 -73829 36482 12860 52793 -83917 -44281 -24504 24712 739 -1880 71325 -37625 58839 -9665 -18514 -34183 69211 -30211 40808 -27343 13498 -6156 92909 -16204 -18773 64374 51525 93760 83056 -3661 91100 33671 -88323 -36437 -1126 23750 -83218 95971 -26392 52561 26658 54042 -41293 99959 10619 -65320 51297 -37039 -60318 96471 64396 68170 -94986 3948 68381 -33458 59819 -50661 -28106 90526 -98650 10640 -87240 86525 -57237 37649 30750 -18434 91028 -70222 21348 66866 49663 -51781 -83588 29757 21622 -29025 -29599 76144 -25076 74617 70842 9120 38498 7151 2017 62851 -83909 -64067 -1264 -1408 82196 63167 64548 30573 1424 -49815 82901 -58755 77 30318 -56981 78731 -92798 6847 31350 92880 -98036 -54242 28023 72367 -56803 -47832 -73042 2872 -69425 -62988 76980 -2444 -82433 13257 56094 -45191 85619 -35275 -89531 -77157 9555 58172 -18037 64985 89582 47931 -16993 -90670 26459 -90283 17382 -79299 -98245 16538 36189 41520 -45961 -27861 -90017 -10438 16086 -28036 -47260 -87716 -68292 -37318 -72082 -58238 83310 -53778 79318 73689 66342 22028 24710 92377 -12350 -99199 -79123 -57380 49639 25828 -24258 -25088 -85429 85651 -39858 -81719 -60860 99913 24020 -96209 7212 -71930 20268 14528 -20719 -62942 -2825 22542 65562 -64824 -69621 -26703 -95545 -67465 78493 43532 59137 85585 -98587 29461 94316 248 -66926 -90471 85367 20724 -7859 -49322 84196 -39845 72864 -30728 -57408 -54348 -86536 53518 -25588 -2229 95151 -72562 -31183 88613 -91954 8585 16080 32018 -90069 -39503 -13954 -618 -19938 -50389 -16680 89870 35418 -27153 -39945 98410 35043 83372 -23307 37587 42880 -48273 30812 -73161 -70185 59406 93894 63025 -2223 26473 -34573 34402 48496 57540 24231 74609 -92999 -65392 68474 83714 43145 -83685 89040 65419 69603 9586 47357 -59788 79169 -24129 44198 26834 -27827 -25534 -90955 45261 -91024 -4061 11170 58285 -68700 9102 54103 19026 -87990 -54517 -39246 -58740 75957 -32316 -2521 -71925 -53491 -83589 -96581 44318 -44306 -8676 20183 69500 -58437 33932 68111 67919 -30693 -91128 21427 56474 61084 93464 -16183 -48167 -6170 -20336 -89286 -68626 79725 51650 -14867 1550 -99149 -8184 1026 -68883 -56226 47595 42338 84090 -48000 -41173 58767 -54407 53875 50486 66356 50670 44618 81655 85223 -10040 -59999 74161 40053 97250 1680 -63984 -38549 27455 90185 -50959 -59355 -19842 25073 49684 -6965 -53030 75338 64550 -78475 37632 -93377 74941 52764 91669 -59824 -78289 54727 23755 -6576 -99972 73674 91542 -64288 3836 86414 93401 -8726 -46519 77250 -2001 76316 -1308 78697 79645 -16259 -43901 41074 86475 20071 74324 69430 -53093 21942 -84916 37054 58731 66269 67777 86201 -94538 67078 34138 -23086 16479 -85233 80305 -7897 -90879 51123 -99488 -54677 -68124 -93667 709 73751 14595 -83763 -58247 2519 94042 71902 -65671 93882 -59906 -27753 17709 -83940 62451 -79419 -44050 94952 12942 -74026 60133 -19360 -95808 -23218 -54555 22363 31225 -41705 56874 -56790 -99172 -47802 -73589 17065 13238 -11684 21174 74953 -81267 32635 -58983 -53840 -25469 -28324 -75173 6018 -60784 68467 -4247 18070 -61614 -15250 -3056 5939 56801 -42894 -24933 27272 -95022 -568 99829 -13274 -60726 9629 -49244 77780 -67046 24438 -31686 42290 -17139 12699 68337 96589 59400 96407 11942 -73664 38370 -5933 -69824 29398 -1358 19637 54519 -76853 81956 -3073 -5023 52625 25938 11429 86318 98291 -51790 26329 94125 -40919 -99138 17245 -54111 14267 55613 -80115 78358 75450 35324"


TESTS_SIZE=25

for ((i=0;i<=$TESTS_SIZE;i++)); do
  printf "Test %02d -> " $i;
  begin=`perl -MTime::HiRes -e 'printf("%.0f\n",Time::HiRes::time()*1000)'`
  ./reto ${TEST_ELEMENTS[$i]} | grep -q "There is a"
  result=$?
  end=`perl -MTime::HiRes -e 'printf("%.0f\n",Time::HiRes::time()*1000)'`
  elapsed=`awk "BEGIN {print (${end} - ${begin})/1000}"`
  if [ $result -eq ${TEST_SOLUTION[$i]} ]; then
    printf "OK [%0.3fs]\n" ${elapsed}
  else
    echo "KO  => "${TEST_ELEMENTS[$i]}
  fi
done
